(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"2yxt":function(e,t,s){"use strict";s.r(t),s.d(t,"ChatPageModule",function(){return y});var i=s("ofXK"),n=s("3Pt+"),o=s("TEn/"),r=s("tyNb");class a{}var l=s("2jHR"),c=s("fXoL"),h=s("w3GS");let d=(()=>{class e{get nativeWindow(){return window}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(c.Ib)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),g=(()=>{class e{constructor(e,t,s){this.element=e,this._window=t,this._zone=s,this.onlyGrow=!1,this.useImportant=!1,this.resized=new c.o,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style.overflow="hidden",this._onTextAreaFound())}set minRows(e){this._minRows=e,this.textAreaEl&&(this.textAreaEl.rows=e)}onInput(e){this.adjust()}ngOnDestroy(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)}ngAfterContentChecked(){this.adjust()}ngOnChanges(e){this.adjust(!0)}_findNestedTextArea(){this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style.overflow="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(()=>{this._findNestedTextArea()},100))}_onTextAreaFound(){this._addWindowResizeHandler(),setTimeout(()=>{this.adjust()})}_addWindowResizeHandler(){this._windowResizeHandler=function(e,t,s=!1){let i;return function(){const n=this,o=arguments,r=function(){i=null,s||e.apply(n,o)},a=s&&!i;clearTimeout(i),i=setTimeout(r,t),a&&e.apply(n,o)}}(()=>{this._zone.run(()=>{this.adjust()})},200),this._zone.runOutsideAngular(()=>{this._window.nativeWindow.addEventListener("resize",this._windowResizeHandler,!1)})}adjust(e=!1){if(!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){const t=this.textAreaEl.value;if(!1===e&&t===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=t,this._oldWidth=this.textAreaEl.offsetWidth;const s=this.textAreaEl.cloneNode(!0),i=this.textAreaEl.parentNode;s.style.width=this.textAreaEl.offsetWidth+"px",s.style.visibility="hidden",s.style.position="absolute",s.textContent=t,i.appendChild(s),s.style.overflow="hidden",s.style.height="auto";let n=s.scrollHeight,o=this._window.nativeWindow.getComputedStyle(s,null);n+=parseInt(o.getPropertyValue("border-top-width")),n+=parseInt(o.getPropertyValue("border-bottom-width")),n+=parseInt(o.getPropertyValue("padding-top")),n+=parseInt(o.getPropertyValue("padding-bottom"));const r=this.textAreaEl.offsetHeight,a=n>r;if(!1===this.onlyGrow||a){const e=this._getLineHeight(),t=n/e;if(this._minRows&&this._minRows>=t)n=this._minRows*e;else if(this.maxRows&&this.maxRows<=t){const t=this.maxRows*e;n=this.onlyGrow?Math.max(t,r):t,this.textAreaEl.style.overflow="auto"}else this.textAreaEl.style.overflow="hidden";this.textAreaEl.style.setProperty("height",n+"px",this.useImportant?"important":""),this.resized.emit(n)}i.removeChild(s)}}_getLineHeight(){let e=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(e)&&this._window.nativeWindow.getComputedStyle){const t=this._window.nativeWindow.getComputedStyle(this.textAreaEl);e=parseInt(t.lineHeight,10)}if(isNaN(e)){const t=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");e=Math.floor(1.5*parseInt(t.replace("px",""),10))}return e}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(c.m),c.Mb(d),c.Mb(c.B))},e.\u0275dir=c.Hb({type:e,selectors:[["","autosize",""]],hostBindings:function(e,t){1&e&&c.Zb("input",function(e){return t.onInput(e.target)})},inputs:{onlyGrow:"onlyGrow",useImportant:"useImportant",minRows:"minRows",maxRows:"maxRows"},outputs:{resized:"resized"},features:[c.Ab]}),e})(),u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({providers:[d],imports:[[]]}),e})();function m(e,t){1&e&&c.Nb(0,"ion-spinner",13)}function b(e,t){if(1&e&&(c.Rb(0,"ion-col",16),c.Rb(1,"span"),c.qc(2),c.Qb(),c.Rb(3,"div",17),c.Rb(4,"label",18),c.qc(5),c.cc(6,"date"),c.Qb(),c.Qb(),c.Qb()),2&e){const e=c.bc().$implicit;c.Cb(2),c.rc(e.Msg),c.Cb(3),c.rc(c.dc(6,2,e.SysTime,"shortTime"))}}function p(e,t){if(1&e&&(c.Rb(0,"ion-col",19),c.Rb(1,"span"),c.qc(2),c.Qb(),c.Rb(3,"div",17),c.Rb(4,"label",18),c.qc(5),c.cc(6,"date"),c.Qb(),c.Qb(),c.Qb()),2&e){const e=c.bc().$implicit;c.Cb(2),c.rc(e.Msg),c.Cb(3),c.rc(c.dc(6,2,e.SysTime,"shortTime"))}}function f(e,t){if(1&e&&(c.Rb(0,"ion-row"),c.pc(1,b,7,5,"ion-col",14),c.pc(2,p,7,5,"ion-col",15),c.Qb()),2&e){const e=t.$implicit,s=c.bc();c.Cb(1),c.gc("ngIf",s.currentUser!=e.SenderId),c.Cb(1),c.gc("ngIf",s.currentUser==e.SenderId)}}const w=[{path:"",component:(()=>{class e{constructor(e,t,s){this.router=e,this.msgservice=t,this.activatedRoute=s,this.myDate=new Date,this.msg=new a,this.MessageList=[],this.user=new l.b,this.showSpinner=!1,this.currentUser=JSON.parse(localStorage.getItem("user")).Id,this.activatedRoute.queryParams.subscribe(e=>{this.router.getCurrentNavigation().extras.state&&this.router.getCurrentNavigation().extras.state.Item?(this.user=this.router.getCurrentNavigation().extras.state.Item,console.log(this.user)):this.router.navigate(["all-chats"])})}ngOnInit(){}ionViewWillEnter(){this.GetMsgOfUser()}SendMessage(){this.msg.SenderId=JSON.parse(localStorage.getItem("user")).Id,this.msg.ReceiverId=this.user.Id,console.log(this.msg),this.msgservice.InsertMsg(this.msg).subscribe(e=>{e?(console.log("message sent"),this.GetMsgOfUser(),setTimeout(()=>{this.content.scrollToBottom(100)}),this.msg.Msg=""):console.log("msg send failed")})}GetMsgOfUser(){this.showSpinner=!0,this.SenderId=this.user.Id,this.ReceiverId=JSON.parse(localStorage.getItem("user")).Id,console.log(this.SenderId,this.ReceiverId),this.msgservice.GetMsg(this.SenderId,this.ReceiverId).subscribe(e=>{this.showSpinner=!1,e.length>0&&(this.MessageList=e,console.log(this.MessageList),setTimeout(()=>{this.content.scrollToBottom(100)}))})}goback(){this.router.navigate(["all-chats"])}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(r.g),c.Mb(h.a),c.Mb(r.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-chat"]],viewQuery:function(e,t){if(1&e&&c.tc(o.k,1),2&e){let e;c.hc(e=c.ac())&&(t.content=e.first)}},decls:19,vars:5,consts:[["slot","start","name","arrow-back-outline",2,"font-size","26px","margin-right","1px",3,"click"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRoMahNQjpPePWaoDKUZFVhE4iHM1RBUKpsjg&usqp=CAU"],[2,"font-size","larger","margin-left","3px"],["slot","end","name","ellipsis-vertical-outline"],["name","crescent","style","left: 45%;top: 50%;",4,"ngIf"],["fixed",""],[4,"ngFor","ngForOf"],[1,"ion-align-items-center","ion-no-padding",2,"color","var(--ion-color-light)"],["size","10"],["autosize","","value","Type your message",1,"message-input",3,"ngModel","ngModelChange"],["size","2"],["expand","block","fill","clear",1,"msg-btn",3,"disabled","click"],["slot","icon-only","name","send"],["name","crescent",2,"left","45%","top","50%"],["size","9","class","message other-message",4,"ngIf"],["size","9","offset","3","class","message my-message",4,"ngIf"],["size","9",1,"message","other-message"],["text-right","",1,"time"],[1,"sendtime"],["size","9","offset","3",1,"message","my-message"]],template:function(e,t){1&e&&(c.Rb(0,"ion-header"),c.Rb(1,"ion-toolbar"),c.Rb(2,"ion-item"),c.Rb(3,"ion-icon",0),c.Zb("click",function(){return t.goback()}),c.Qb(),c.Rb(4,"ion-avatar"),c.Nb(5,"img",1),c.Qb(),c.Rb(6,"ion-label",2),c.qc(7),c.Qb(),c.Nb(8,"ion-icon",3),c.Qb(),c.Qb(),c.Qb(),c.Rb(9,"ion-content"),c.pc(10,m,1,0,"ion-spinner",4),c.Rb(11,"ion-grid",5),c.pc(12,f,3,2,"ion-row",6),c.Qb(),c.Qb(),c.Rb(13,"ion-row",7),c.Rb(14,"ion-col",8),c.Rb(15,"textarea",9),c.Zb("ngModelChange",function(e){return t.msg.Msg=e}),c.Qb(),c.Qb(),c.Rb(16,"ion-col",10),c.Rb(17,"ion-button",11),c.Zb("click",function(){return t.SendMessage()}),c.Nb(18,"ion-icon",12),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.Cb(7),c.rc(t.user.Name),c.Cb(3),c.gc("ngIf",t.showSpinner),c.Cb(2),c.gc("ngForOf",t.MessageList),c.Cb(3),c.gc("ngModel",t.msg.Msg),c.Cb(2),c.gc("disabled",""==t.msg.Msg))},directives:[o.p,o.L,o.s,o.q,o.c,o.t,o.k,i.k,o.o,i.j,o.x,o.j,n.a,g,n.f,n.g,o.d,o.D],pipes:[i.e],styles:[".message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:var(--ion-color-light)}.my-message[_ngcontent-%COMP%]{background:var(--ion-color-medium)}.time[_ngcontent-%COMP%]{float:right}.message-input[_ngcontent-%COMP%]{width:100%;outline:none;max-height:100px;overflow:auto!important;border-radius:20px;resize:none;padding-left:10px;padding-right:10px;border:none;background-color:var(--ion-color-light);color:var(--ion-color-medium)}.sendtime[_ngcontent-%COMP%]{font-size:small}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[r.i.forChild(w)],r.i]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[i.c,n.b,o.M,x,u]]}),e})()},"9FTp":function(e,t,s){"use strict";s.d(t,"a",function(){return i});class i{constructor(){this.url="http://localhost:53746/api",this.AssetUrl="http://localhost:53746"}}}}]);