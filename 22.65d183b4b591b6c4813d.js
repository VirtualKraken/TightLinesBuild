(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{oXeq:function(t,e,n){"use strict";n.r(e),n.d(e,"CatchesPageModule",function(){return Q});var i=n("ofXK"),c=n("3Pt+"),o=n("TEn/"),a=n("tyNb");class s{}class r{constructor(t){this.file=t}}var l=n("2jHR"),b=n("nYR2"),h=n("fXoL"),d=n("f2qm"),g=n("Vaw3"),u=n("qwCZ");function f(t,e){if(1&t){const t=h.Sb();h.Rb(0,"div",8),h.Rb(1,"ion-icon",9),h.Zb("click",function(){return h.lc(t),h.bc().closeModal()}),h.Qb(),h.Nb(2,"img",10),h.Rb(3,"ion-fab",11),h.Zb("click",function(){return h.lc(t),h.bc().showPreviousImage()}),h.Rb(4,"ion-fab-button",12),h.Nb(5,"ion-icon",13),h.Qb(),h.Qb(),h.Rb(6,"ion-fab",14),h.Zb("click",function(){return h.lc(t),h.bc().showNextImage()}),h.Rb(7,"ion-fab-button",12),h.Nb(8,"ion-icon",15),h.Qb(),h.Qb(),h.Qb()}if(2&t){const t=h.bc();h.Cb(2),h.gc("src",t.CurrentImage,h.mc)}}function p(t,e){if(1&t){const t=h.Sb();h.Rb(0,"ion-card-content"),h.Rb(1,"ion-button",16),h.Zb("click",function(){return h.lc(t),h.bc().collapseCard=!0}),h.Nb(2,"ion-icon",17),h.qc(3,"ADD CATCH "),h.Qb(),h.Qb()}}function m(t,e){if(1&t&&h.Nb(0,"img",27),2&t){const t=h.bc(2);h.gc("src",t.Catchimage,h.mc)}}function C(t,e){1&t&&(h.Rb(0,"ion-text"),h.qc(1," SAVE CATCH"),h.Qb())}function I(t,e){1&t&&h.Nb(0,"ion-spinner",28)}function w(t,e){if(1&t&&(h.Rb(0,"ion-text"),h.qc(1),h.Qb()),2&t){const t=h.bc(2);h.Cb(1),h.sc("",t.uploadpercent,"%")}}function M(t,e){if(1&t){const t=h.Sb();h.Rb(0,"ion-card-content",18),h.Rb(1,"div",19),h.Zb("click",function(){return h.lc(t),h.bc().collapseCard=!1}),h.Nb(2,"ion-icon",20),h.Qb(),h.Rb(3,"ion-label"),h.qc(4,"Details"),h.Qb(),h.Rb(5,"ion-input",21),h.Zb("ngModelChange",function(e){return h.lc(t),h.bc().catch.Details=e}),h.Qb(),h.Rb(6,"ion-label"),h.qc(7,"KG"),h.Qb(),h.Rb(8,"ion-input",22),h.Zb("ngModelChange",function(e){return h.lc(t),h.bc().catch.Weight=e}),h.Qb(),h.Rb(9,"ion-label"),h.qc(10,"Date & Time "),h.Qb(),h.Rb(11,"ion-datetime",23),h.Zb("ngModelChange",function(e){return h.lc(t),h.bc().catch.Date=e}),h.Qb(),h.Rb(12,"ion-button",16),h.Zb("click",function(){return h.lc(t),h.bc(),h.ic(7).click()}),h.Nb(13,"ion-icon",17),h.qc(14,"ADD PHOTO "),h.Qb(),h.pc(15,m,1,1,"img",24),h.Rb(16,"ion-button",25),h.Zb("click",function(){return h.lc(t),h.bc().UploadImage()}),h.pc(17,C,2,0,"ion-text",5),h.pc(18,I,1,0,"ion-spinner",26),h.pc(19,w,2,1,"ion-text",5),h.Qb(),h.Qb()}if(2&t){const t=h.bc();h.Cb(5),h.gc("ngModel",t.catch.Details),h.Cb(3),h.gc("ngModel",t.catch.Weight),h.Cb(3),h.gc("ngModel",t.catch.Date),h.Cb(4),h.gc("ngIf",t.Catchimage),h.Cb(2),h.gc("ngIf",!t.savingprogress),h.Cb(1),h.gc("ngIf",t.savingprogress),h.Cb(1),h.gc("ngIf",t.savingprogress)}}function v(t,e){if(1&t){const t=h.Sb();h.Rb(0,"ion-item",29),h.Rb(1,"img",30),h.Zb("click",function(){h.lc(t);const n=e.$implicit,i=e.index;return h.bc().openthisImage(n.payload.doc.data().Url,i)}),h.Qb(),h.Rb(2,"ion-label",31),h.Rb(3,"h2",32),h.qc(4),h.Qb(),h.Rb(5,"h3"),h.qc(6),h.cc(7,"date"),h.Qb(),h.Rb(8,"div"),h.qc(9),h.Qb(),h.Qb(),h.Qb()}if(2&t){const t=e.$implicit;h.Cb(1),h.gc("src",t.payload.doc.data().Url,h.mc),h.Cb(3),h.sc("",t.payload.doc.data().Weight,"KG"),h.Cb(2),h.rc(h.dc(7,4,t.payload.doc.data().Date,"MMM d, y h:mm a")),h.Cb(3),h.sc(" ",t.payload.doc.data().Details," ")}}const x=[{path:"",component:(()=>{class t{constructor(t,e,n,i){this.platform=t,this.fireservice=e,this.storage=n,this.alert=i,this.catch=new s,this.fireuser=new l.a,this.AuthId=this.fireuser.GetAuthId(),this.basePath="CatchImages",this.CatchList=[],this.collapseCard=!1,this.showimage=!1,this.platform.backButton.subscribeWithPriority(10,()=>{this.closeModal()})}ngOnInit(){}ionViewWillEnter(){this.GetAllcatches()}fileChangeEvent(t){if(t.target.files&&t.target.files[0]){const e=6e6;if(t.target.files[0].size>e)return void this.alert.PresentToast("Maximum size allowed is "+e/1e6+"Mb",2500);const n=new FileReader;n.onload=e=>{const n=new Image;n.src=e.target.result,n.onload=n=>{this.selectedFiles=t.target.files,this.Catchimage=e.target.result}},n.readAsDataURL(t.target.files[0])}}UploadImage(){var t;if(this.catch.Details&&this.catch.Date)if(this.savingprogress=!0,null!=this.selectedFiles){const e=(null===(t=this.selectedFiles)||void 0===t?void 0:t.item)?this.selectedFiles.item(0):void 0;this.selectedFiles=void 0;let n=new r(e);n.AuthId=this.fireuser.GetAuthId(),this.UploadandreturnURL(n).subscribe(t=>{this.uploadpercent=Math.round(t)},t=>{console.log(t)})}else this.catch.AuthId=this.fireuser.GetAuthId(),this.catch.Url="",this.fireservice.InsertCatch(this.catch),this.savingprogress=!1,this.clearFields();else this.alert.PresentToast("Please Enter Details and Date..",4e3)}UploadandreturnURL(t){console.log(t);const e=`${this.basePath}/${t.AuthId}${t.file.name}`,n=this.storage.ref(e),i=this.storage.upload(e,t.file);return i.snapshotChanges().pipe(Object(b.a)(()=>{n.getDownloadURL().subscribe(e=>{t.name=t.file.name,this.catch.AuthId=this.fireuser.GetAuthId(),this.catch.Url=e,this.fireservice.InsertCatch(this.catch),this.savingprogress=!1,this.clearFields()})})).subscribe(),i.percentageChanges()}GetAllcatches(){this.sub=this.fireservice.GetAllCatches(this.AuthId).subscribe(t=>{this.CatchList=t.reverse(),this.CatchList.forEach(t=>{})})}clearFields(){this.catch=new s,this.selectedFiles=void 0,this.Catchimage=""}ionViewDidLeave(){this.sub.unsubscribe()}openthisImage(t,e){this.currentIndex=e,this.showimage=!0,this.CurrentImage=t}closeModal(){this.showimage=!1}showNextImage(){this.CatchList.length-1!=this.currentIndex&&this.openthisImage(this.CatchList[this.currentIndex+1].payload.doc.data().Url,this.currentIndex+1)}showPreviousImage(){0!=this.currentIndex&&this.openthisImage(this.CatchList[this.currentIndex-1].payload.doc.data().Url,this.currentIndex-1)}}return t.\u0275fac=function(e){return new(e||t)(h.Mb(o.R),h.Mb(d.a),h.Mb(g.a),h.Mb(u.a))},t.\u0275cmp=h.Gb({type:t,selectors:[["app-catches"]],decls:15,vars:5,consts:[["class","modal",4,"ngIf"],[1,"ion-no-border"],["type","file","accept",".jpg,.jpeg,.png",2,"display","none",3,"change"],["inputCam",""],[3,"disabled"],[4,"ngIf"],["class","ion-align-items-center",4,"ngIf"],["style","overflow: auto",4,"ngFor","ngForOf"],[1,"modal"],["name","close-outline",3,"click"],["id","imageinmodal",3,"src"],["vertical","center","horizontal","start","slot","fixed",3,"click"],["size","small"],["name","chevron-back-outline"],["vertical","center","horizontal","end","slot","fixed",3,"click"],["name","chevron-forward-outline"],["expand","block","shape","round",3,"click"],["name","camera"],[1,"ion-align-items-center"],[2,"text-align","center",3,"click"],["name","close-circle-outline",1,"closecircle"],["type","text","placeholder","Name,place",3,"ngModel","ngModelChange"],["type","number","placeholder","weight",3,"ngModel","ngModelChange"],["display-format","DD.MMM.YYYY h m A",3,"ngModel","ngModelChange"],["alt","","style","object-fit: contain",3,"src",4,"ngIf"],["expand","block","fill","solid","shape","round",3,"click"],["name","crescent",4,"ngIf"],["alt","",2,"object-fit","contain",3,"src"],["name","crescent"],[2,"overflow","auto"],["slot","end","height","100px","width","100px",2,"object-fit","cover",3,"src","click"],[1,"catchlabel"],[1,"weighth2"]],template:function(t,e){1&t&&(h.pc(0,f,9,1,"div",0),h.Rb(1,"ion-header",1),h.Rb(2,"ion-toolbar"),h.Rb(3,"ion-title"),h.qc(4,"Catches"),h.Qb(),h.Qb(),h.Qb(),h.Rb(5,"ion-content"),h.Rb(6,"input",2,3),h.Zb("change",function(t){return e.fileChangeEvent(t)}),h.Qb(),h.Rb(8,"ion-card",4),h.pc(9,p,4,0,"ion-card-content",5),h.pc(10,M,20,7,"ion-card-content",6),h.Qb(),h.Rb(11,"ion-list"),h.Rb(12,"ion-list-header"),h.qc(13," This month "),h.Qb(),h.pc(14,v,10,7,"ion-item",7),h.Qb(),h.Qb()),2&t&&(h.gc("ngIf",e.showimage),h.Cb(8),h.gc("disabled",e.savingprogress),h.Cb(1),h.gc("ngIf",!e.collapseCard),h.Cb(1),h.gc("ngIf",e.collapseCard),h.Cb(4),h.gc("ngForOf",e.CatchList))},directives:[i.k,o.p,o.L,o.J,o.k,o.e,o.u,o.v,i.j,o.q,o.m,o.n,o.f,o.d,o.t,o.r,o.T,c.f,c.g,o.Q,o.l,o.S,o.H,o.D,o.s],pipes:[i.e],styles:["ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{--border-radius:1px}.weighth2[_ngcontent-%COMP%]{width:75px;background-color:#5dcf30;padding:5px 10px;font-weight:700;justify-content:center;text-align:center;overflow:visible}.weighth2[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%]{border-radius:20px}.catchlabel[_ngcontent-%COMP%]{overflow:auto;max-height:200px;text-align:justify;white-space:normal}.closecircle[_ngcontent-%COMP%]{position:absolute;height:37px;width:37px;left:50%;top:54px;transform:translate(-50%,-150%)}.modal[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;height:100%;position:fixed;background-color:rgba(50,71,64,.23);z-index:10000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.modal[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{margin:0 auto;object-fit:contain}.modal[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{position:absolute;right:0;font-size:xx-large}.modal[_ngcontent-%COMP%] > ion-fab[_ngcontent-%COMP%]{top:70%;opacity:.6}"]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({imports:[[a.i.forChild(x)],a.i]}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({imports:[[i.c,c.b,o.M,R]]}),t})()}}]);